<!--
  Generated template for the EditReportPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{mode}} Report</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding-top padding-bottom>

  <ion-card class="player-card" *ngIf="report.player">
    <img [src]="'assets/imgs/player/' + report.player.imgName + '.png'" />
    <div class="player-info">
      <h1>{{report.player.name}}</h1>
      <p>{{report.player.age}}, {{report.player.country}}</p>
      <p>{{report.player.position}}, {{report.player.club}}</p>
    </div>
    <ion-row no-padding>
      <ion-col text-right>
        <button ion-button clear small color="primary" icon-start (click)="showSelectionDiv()" *ngIf="mode === 'New'">
          <i class="material-icons">
            cached
          </i>
        </button>
      </ion-col>
    </ion-row>
  </ion-card>


  <div *ngIf="!report.player">
    <ion-card class="player-card">
      <img src="assets/imgs/player/default.png" />
      <div class="player-info">
        <h1>Name</h1>
        <p>Years, Country</p>
        <p>Position, Club</p>
      </div>
    </ion-card>
    <button ion-button block color="primary" (click)="openPlayerSearchModal()">SELECT EXISTING PLAYER</button>
    <p style="width: 100%; text-align: center">or if you can't find him</p>
    <button ion-button block color="primary" (click)="openNewPlayerModal()">ADD NEW ONE</button>
  </div>

  <ion-card class="card-primary" *ngIf="report.player">
    <ion-card-header>
      Skills
    </ion-card-header>

    <ion-list padding-left padding-right padding-bottom>
      <div class="skill" padding-bottom *ngFor="let skill of report.skills">
        <div class="title">{{skill.title}}</div>
        <div class="stars">
          <button class="star-btn" (click)="decreaseSkillValue(skill)">
            <i class="material-icons md-secondary">
              remove_circle
            </i>
          </button>

          <i class="material-icons md-24 md-secondary" *ngFor="let iconName of skill.starsArray">
            {{ iconName }}
          </i>
          <button class="star-btn" (click)="increaseSkillValue(skill)">
            <i class="material-icons md-secondary">
              add_circle
            </i>
          </button>
        </div>
      </div>

    </ion-list>
  </ion-card>

  <div *ngIf="report.player">
    <button ion-button block outline color="primary" (click)="startScouting()" *ngIf="!report._id; else elseTemplate">
      START SCOUTING
    </button>
    <ng-template #elseTemplate>
      <div>
        <ion-card class="card-primary">
          <ion-card-header>
            Games
          </ion-card-header>

          <div style="width: 100%; display: flex; justify-content: center">
            <div class="games" padding-bottom>
              <button class="game-btn" *ngFor="let game of report.games">
                <div style="margin-bottom: 8px">{{game.opponent}}</div>

                <div>{{game.rating}}</div>

              </button>

              <button class="game-btn" (click)="addGame()">
                <div>ADD</div>
                <div>NEW</div>
              </button>
            </div>
          </div>

        </ion-card>

      </div>

      <button ion-button block outline color="primary" (click)="updateReport()">
        UPDATE REPORT
      </button>
    </ng-template>


  </div>



</ion-content>